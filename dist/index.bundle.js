!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{constructor(e){this.message=e,this.name="IndexOutOfArrayException"}}t.IndexOutOfArrayExecption=o;class r{constructor(e,t){var n;if("string"==typeof e)n=document.querySelectorAll(e),null!=t&&(n=[n[t]]);else{if(null==e||e==document)return this.ready=function(e){document.addEventListener("DOMContentLoaded",e)},this;if("object"!=typeof e)return"ExtJsObject"==e.type?e:void 0;n=null==e.length?[e]:null!=t?[e[t]]:e}this.type="ExtJsObject",this.node=n}html(e){if(null!=e){for(var t=0;t<this.node.length;t++){var n=this.node[t];"string"!=typeof e&&"number"!=typeof e||(n.innerHTML=e)}return this}return this.node[0].innerHTML}text(e){if(null!=e){for(var t=0;t<this.node.length;t++){var n=this.node[t];"string"!=typeof e&&"number"!=typeof e||(n.innerText=e)}return this}return this.node[0].innerText}click(e,t){for(var n=0;n<this.node.length;n++){var o=this.node[n];if(void 0===t)void 0!==e?o.addEventListener("click",e):o.click();else if(void 0!==e){var r=o;o.addEventListener("click",(function(n){if(r.querySelector(t)==n.target){let n=r.querySelector(t);n.prototype.toDo=e,n.toDo()}}))}else{(r=o).querySelector(t).click()}}return this}dblclick(e,t){for(var n=0;n<this.node.length;n++){var o=this.node[n];if(void 0===t)void 0!==e?o.addEventListener("dblclick",e):o.dblclick();else if(void 0!==e){var r=o;o.addEventListener("dblclick",(function(n){if(r.querySelector(t)==n.target){let n=r.querySelector(t);n.prototype.toDo=e,n.toDo()}}))}else{(r=o).querySelector(t).dblclick()}}return this}hover(e,t){for(var n=0;n<this.node.length;n++){var o=this.node[n];if(void 0===t)void 0!==e?o.addEventListener("mouseover",e):o.click();else if(void 0!==e){var r=o;o.addEventListener("mouseover",(function(n){if(r.querySelector(t)==n.target){let n=r.querySelector(t);n.prototype.toDo=e,n.toDo()}}))}}return this}leave(e,t){for(var n=0;n<this.node.length;n++){var o=this.node[n];if(void 0===t)void 0!==e?o.addEventListener("mouseleave",e):o.click();else if(void 0!==e){var r=o;o.addEventListener("mouseleave",(function(n){if(r.querySelector(t)==n.target){let n=r.querySelector(t);n.prototype.toDo=e,n.toDo()}}))}}return this}get(e){if(null!=e){if(null==this.node[e])throw new o("ExtJsObject.get undefined index node["+e+"]");return this.node[e]}if(null==this.node[0])throw new o("ExtJsObject.get undefined index node[0]");return this.node[0]}exists(e){return null!=e?null!=this.node[e]:0!=this.node.length}height(e){for(var t=0;t<this.node.length;t++){var n=this.node[t];if(void 0===e)return n.offsetHeight;n.style.height=e}return this}width(e){for(var t=0;t<this.node.length;t++){var n=this.node[t];if(void 0===e)return n.offsetWidth;n.style.width=e}return this}addClass(e){for(var t=0;t<this.node.length;t++){this.node[t].classList.add(e)}return this}hasClass(e){return this.node[0].classList.contains(e)}removeClass(e){for(var t=0;t<this.node.length;t++){this.node[t].classList.remove(e)}return this}remove(){for(var e=0;e<this.node.length;e++){var t=this.node[e];t.parentElement.removeChild(t)}}child(e){for(var t=[],n=0;n<this.node.length;n++){var o=this.node[n],r=document.createElement(e);o.appendChild(r),t.push(r)}return i(t)}css(e,t,n){var o=n;if(null==n&&(n=0),null==t)return this.node[n].style[e];if(null!=o)return this.node[n].style[e]=t,this;for(let n=0;n<this.node.length;n++){this.node[n].style[e]=t}return this}attr(e,t,n){var o=n;if(null==n&&(n=0),null==t)return this.node[n].getAttribute(e);if(null!=o)return this.node[n].style[e]=t,this;for(let n=0;n<this.node.length;n++){this.node[n].setAttribute(e,t)}return this}parent(e){for(var t=[],n=0;n<this.node.length;n++){var o=this.node[n];null==e?t.push(o.parentElement):t.push(o.closest(e))}return i(t)}value(e){if(null!=e){for(var t=0;t<this.node.length;t++){var n=this.node[t];"string"!=typeof e&&"number"!=typeof e||(n.value=e)}return this}this.node[0];return this.node[0].value}keypress(e,t){for(var n=0;n<this.node.length;n++){var o=this.node[n];if(void 0===t)void 0!==e&&o.addEventListener("keypress",e);else if(void 0!==e){var r=o;o.addEventListener("keypress",(function(n){if(r.querySelector(t)==n.target){let n=r.querySelector(t);n.prototype.toDo=e,n.toDo()}}))}}return this}input(e,t){for(var n=0;n<this.node.length;n++){var o=this.node[n];if(void 0===t)void 0!==e&&o.addEventListener("input",e);else if(void 0!==e){var r=o;o.addEventListener("input",(function(n){if(r.querySelector(t)==n.target){let n=r.querySelector(t);n.prototype.toDo=e,n.toDo()}}))}}return this}keydown(e,t){for(var n=0;n<this.node.length;n++){var o=this.node[n];if(void 0===t)void 0!==e&&o.addEventListener("keydown",e);else if(void 0!==e){var r=o;o.addEventListener("keydown",(function(n){if(r.querySelector(t)==n.target){let n=r.querySelector(t);n.prototype.toDo=e,n.toDo()}}))}}return this}change(e,t){for(var n=0;n<this.node.length;n++){var o=this.node[n];if(void 0===t)void 0!==e&&o.addEventListener("change",e);else if(void 0!==e){var r=o;o.addEventListener("change",(function(n){if(r.querySelector(t)==n.target){let n=r.querySelector(t);n.prototype.toDo=e,n.toDo()}}))}}return this}keyup(e,t){for(var n=0;n<this.node.length;n++){var o=this.node[n];if(void 0===t)void 0!==e&&o.addEventListener("keyup",e);else if(void 0!==e){var r=o;o.addEventListener("keyup",(function(n){if(r.querySelector(t)==n.target){let n=r.querySelector(t);n.prototype.toDo=e,n.toDo()}}))}}return this}prevSibling(){let e=[];for(var t=0;t<this.node.length;t++){var n=this.node[t];e.push(n.previousSibling)}return i(e)}nextSibling(){let e=[];for(var t=0;t<this.node.length;t++){var n=this.node[t];e.push(n.nextSibling)}return i(e)}appendTo(e){let t=this.get(0);e.get(0).appendChild(t)}count(){return this.node.length}forEach(e){for(let t=0;t<this.node.length;t++){const n=this.node[t];e.bind(n)(t)}return this}cssObj(e){return Object.keys(e).forEach(t=>{this.css(t,e[t])}),this}children(e){return i(this.node[0].querySelectorAll(e))}only(e){return i(this.node[e])}}t.ExtJsObject=r;function i(e,t){return null!=e?new r(e,t):this}t.AR=new class{request(e,t,n,o,r){let i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState&&200==i.status)o(i.responseText);else if(4==i.readyState&&null!=r)try{r()}catch(e){}},i.open("GET"==e||"DELETE"==e?"GET":"POST",t,!0);let s="";if(null!=n){let e=Object.keys(n);for(let t=0;t<e.length;t++)0!==t&&(s+="&"),s=s+e[t]+"="+n[e[t]];i.setRequestHeader("Content-type","application/x-www-form-urlencoded")}"PUT"!=e&&"DELETE"!=e||i.setRequestHeader("x-http-method-override",e),""!=s?i.send(s):i.send()}GET(e,t,n){return this.request("GET",e,void 0,t,n)}DELETE(e,t,n){return this.request("DELETE",e,void 0,t,n)}POST(e,t,n,o){return this.request("POST",e,t,n,o)}PUT(e,t,n,o){return this.request("PUT",e,t,n,o)}},t.$=i},function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n=e[1]||"",o=e[3];if(!o)return n;if(t&&"function"==typeof btoa){var r=(s=o,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */"),i=o.sources.map((function(e){return"/*# sourceURL="+o.sourceRoot+e+" */"}));return[n].concat(i).concat([r]).join("\n")}var s;return[n].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n})).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(o[i]=!0)}for(r=0;r<e.length;r++){var s=e[r];"number"==typeof s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),t.push(s))}},t}},function(e,t,n){var o,r,i={},s=(o=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=o.apply(this,arguments)),r}),a=function(e){return document.querySelector(e)},l=function(e){var t={};return function(e){if("function"==typeof e)return e();if(void 0===t[e]){var n=a.call(this,e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),d=null,c=0,u=[],f=n(12);function p(e,t){for(var n=0;n<e.length;n++){var o=e[n],r=i[o.id];if(r){r.refs++;for(var s=0;s<r.parts.length;s++)r.parts[s](o.parts[s]);for(;s<o.parts.length;s++)r.parts.push(b(o.parts[s],t))}else{var a=[];for(s=0;s<o.parts.length;s++)a.push(b(o.parts[s],t));i[o.id]={id:o.id,refs:1,parts:a}}}}function h(e,t){for(var n=[],o={},r=0;r<e.length;r++){var i=e[r],s=t.base?i[0]+t.base:i[0],a={css:i[1],media:i[2],sourceMap:i[3]};o[s]?o[s].parts.push(a):n.push(o[s]={id:s,parts:[a]})}return n}function m(e,t){var n=l(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=u[u.length-1];if("top"===e.insertAt)o?o.nextSibling?n.insertBefore(t,o.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),u.push(t);else if("bottom"===e.insertAt)n.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=l(e.insertInto+" "+e.insertAt.before);n.insertBefore(t,r)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=u.indexOf(e);t>=0&&u.splice(t,1)}function v(e){var t=document.createElement("style");return e.attrs.type="text/css",x(t,e.attrs),m(e,t),t}function x(e,t){Object.keys(t).forEach((function(n){e.setAttribute(n,t[n])}))}function b(e,t){var n,o,r,i;if(t.transform&&e.css){if(!(i=t.transform(e.css)))return function(){};e.css=i}if(t.singleton){var s=c++;n=d||(d=v(t)),o=k.bind(null,n,s,!1),r=k.bind(null,n,s,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",x(t,e.attrs),m(e,t),t}(t),o=L.bind(null,n,t),r=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(t),o=C.bind(null,n),r=function(){g(n)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=s()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=h(e,t);return p(n,t),function(e){for(var o=[],r=0;r<n.length;r++){var s=n[r];(a=i[s.id]).refs--,o.push(a)}e&&p(h(e,t),t);for(r=0;r<o.length;r++){var a;if(0===(a=o[r]).refs){for(var l=0;l<a.parts.length;l++)a.parts[l]();delete i[a.id]}}}};var y,w=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function k(e,t,n,o){var r=n?"":o.css;if(e.styleSheet)e.styleSheet.cssText=w(t,r);else{var i=document.createTextNode(r),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(i,s[t]):e.appendChild(i)}}function C(e,t){var n=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function L(e,t,n){var o=n.css,r=n.sourceMap,i=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||i)&&(o=f(o)),r&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var s=new Blob([o],{type:"text/css"}),a=e.href;e.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(7);n(10);const i=n(0),s=n(13),a=n(5),l=n(22),d=n(4),c=i.$("body").child("div").addClass("workspace"),u=c.child("div").addClass("controls"),f=c.child("div").addClass("slides").child("div").addClass("welcome-wrapper");let p;f.child("img").attr("src","images/working.svg"),f.child("span").text("Bienvenue sur SNotes !"),f.child("p").text("Ouvrez un PDF ou un fichier SNotes 2.0 pour commencer ☺"),[{icon:"note_add",title:"Charger un document",command:()=>o(void 0,void 0,void 0,(function*(){const e=new r.default,t=yield e.snoteDoc;p=new s.default(t)}))},{icon:"save",title:"Sauvegarder",command:function(){return null==p?alert("Aucun document à sauvegarder"):d.default()?(p.doc.file_path||(p.doc.file_path=window.saveDialog()),p.doc.file_path?(n(23).writeFileSync(p.doc.file_path,JSON.stringify(p.save()),"utf8"),console.log("done"),this.innerText="done",void setTimeout(()=>{this.innerText="save"},3e3)):void 0):alert("Désolé, la fonction sauvegarder n'est pas disponible ici mais vous pouvez toujours utiliser l'option télécharger (icone suivante)")},register(){window.addEventListener("keypress",e=>{19==e.which&&e.ctrlKey&&0==e.shiftKey&&this.command.bind(document.getElementById("snote-command-"+this.icon))()})}},{icon:"cloud_download",title:"Sauvegarder en .snote",command:()=>{if(null==p)return alert("Aucun document à sauvegarder");l.saveJSONAsFile(p.save(),"note.snote")},register(){window.addEventListener("keypress",e=>{19==e.which&&e.ctrlKey&&e.shiftKey&&this.command()})}}].forEach(e=>{u.child("span").addClass("material-icons").attr("title",e.title||"").text(e.icon).attr("id","snote-command-"+e.icon).click((function(){e.command.bind(this)()})),e.register&&e.register()});const h=c.child("div").addClass("flip").html('<i class="material-icons">\n                flip\n            </i>').get(0);let m,g,v=!1;const x=e=>{const t=window.getComputedStyle(c.get(0)).width;window.getComputedStyle(i.$(".rich-textarea").get(0)).width;g=parseFloat(t.replace("px","")),m=e.pageX,v=!0};h.addEventListener("mousedown",x);const b=e=>{if(!v)return;const t=e.pageX-m,n=parseFloat(window.getComputedStyle(document.body).width.replace("px","")),o=Math.min(Math.max(g+t,200),n-200);c.css("width",o+"px"),i.$(".rich-textarea").css("width",n-o-1+"px")};window.addEventListener("mousemove",b),t.updateSize=()=>{m=0,x({pageX:0}),b({pageX:0}),v=!1},window.addEventListener("resize",t.updateSize),window.addEventListener("mouseup",e=>{v=!1}),new a.default("<h2>SNotes 2.0</h2>\n    <div>\n        Bienvenue sur SNotes ! SNotes c'est un logiciel de prise de notes qui est entièrement <i>gratuit</i>. \n        Pas d'abonnement, pas d'achat, toutes les fonctionnalités sont gratuites et le resteront 😎\n    </div>\n    <div><br></div>\n    <h2>Quoi de neuf en version 2 ?</h2>\n    <div>\n        La version 2 de SNotes vient avec le format de prise de notes SNotes format v3. \n        Les notes sont plus structurées au sein du fichier, ce qui rend le logiciel plus efficace lors de l'ouverture des fichiers .snote (ou .snotes, les deux sont valides).\n    </div>\n    <div><br></div>\n    <div>\n        Une interface plus agréable à utiliser est aussi au rendez-vous !\n        Le but est d'être efficace à 100% lors de la prise de notes 😁\n    </div>")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return"process"in window}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);n(14);const r=n(16);t.default=class{constructor(e="Default text",t=o.$("body")){this.classes=["matrix","snotes-math-object"];const n=t.child("div").addClass("rich-textarea");this.base=n,this.controls=n.child("div").addClass("controls"),this.addControls();const i=n.child("div").addClass("text").attr("spellcheck","true").attr("contenteditable","true").html(e);this.textarea=i,i.get(0).addEventListener("blur",e=>{null!=e.relatedTarget&&this.checkClasses(e)||(e.preventDefault(),e.stopPropagation(),e.target.focus())}),i.keyup(e=>{switch(e.key){case"m":e.ctrlKey&&document.execCommand("insertHTML",!1,`<span class="${r.default.className} new">SMathObjectForSNotes</span> `);const t=e.srcElement.querySelector(".new"),n=new r.default;n.buildFrom(t),t.classList.remove("new"),n.focus()}}),i.keydown(e=>{const t=Object.assign({},e);if(t.relatedTarget=e.target,this.checkClasses(t))return;console.log(e);const n=e.keyCode;switch(e.key){case"m":e.ctrlKey&&(e.preventDefault(),e.stopPropagation())}switch(n){case 9:e.preventDefault(),e.ctrlKey?(e.preventDefault(),console.log(e.target),document.execCommand("insertHTML",!0,'<span class="matrix" contenteditable="false">\n                        <table contenteditable="true">\n                            <tr>\n                                <td>0</td>\n                                <td>0</td>\n                                <td>0</td>\n                            </tr>\n                            <tr>\n                                <td>0</td>\n                                <td>0</td>\n                                <td>0</td>\n                            </tr>\n                            <tr>\n                                <td>0</td>\n                                <td>0</td>\n                                <td>0</td>\n                            </tr>\n                        </table>\n                        </span>')):document.execCommand("insertText",void 0,"\t")}})}checkClasses(e){if(console.log("check class called",e),e.relatedTarget.classList.contains("blur-allowed"))return!0;for(let t=0;t<this.classes.length;t++){const n=this.classes[t];try{if(e.relatedTarget&&o.$(e.relatedTarget).parent("."+n).count()>0&&null!=o.$(e.relatedTarget).parent("."+n).get(0))return!0}catch(e){}}return!1}addControls(){const e=this.controls.child("select");[{title:""},{title:"Titre 1",value:"<h1>",action:"formatBlock"},{title:"Titre 2",value:"<h2>",action:"formatBlock"},{title:"Titre 3",value:"<h3>",action:"formatBlock"},{title:"Titre 4",value:"<h4>",action:"formatBlock"}].forEach(t=>{e.child("option").attr("value",t.title).text(t.title),e.change(()=>{e.value()==t.title&&document.execCommand(t.action,void 0,t.value)})}),[{icon:"undo",command:"undo",title:"Annuler"},{icon:"redo",command:"redo",title:"Refaire"},{icon:"format_bold",command:"bold",title:"Mettre en gras"},{icon:"format_align_left",command:"justifyLeft",title:"Aligner à gauche"},{icon:"format_align_center",command:"justifyCenter",title:"Aligner au centre"},{icon:"format_align_right",command:"justifyRight",title:"Aligner à droite"},{icon:"format_align_justify",command:"justifyFull",title:"Justifier"},{icon:"format_italic",command:"italic",title:"Mettre en italique"},{icon:"format_strikethrough",command:"strikeThrough",title:"Barrer"},{icon:"format_indent_increase",command:"indent",title:"Augmenter l'indentation"},{icon:"format_indent_decrease",command:"outdent",title:"Diminuer l'indentation"},{icon:"format_underlined",command:"underline",title:"Souligner"},{icon:"format_list_bulleted",command:"insertUnorderedList",title:"Liste non numérotée"},{icon:"format_list_numbered",command:"insertOrderedList",title:"Liste numérotée"},{icon:"<span>x<sup>2</sup></span>",command:"superscript",title:"Mettre en exposant",html:!0},{icon:"<span>x<sub>2</sub></span>",command:"subscript",title:"Mettre en indice",html:!0}].forEach(e=>{this.controls.child("span").addClass(e.html?"simple-text":"material-icons").attr("title",e.title||"").html(e.icon).click(()=>{document.execCommand(e.command)})})}hide(){this.base.css("display","none")}show(){this.base.css("display","block")}get html(){return this.textarea.html()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.noteObjManager=new class{constructor(){this.objects=[]}set object(e){this.objects.push(e)}loadFor(e){this.objects.forEach(t=>{e.children("."+t.className).forEach((function(){(new t).buildFrom(this)}))})}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=n(0),i=n(8),s=n(9),a=n(4);t.default=class{constructor(){this.snoteDoc=new Promise(e=>{let t=r.$("body").child("input").change(()=>o(this,void 0,void 0,(function*(){const n=new s.default,o=t.get(0).files[0];n.text="Chargement du fichier";const r=o.name.split(".").reverse()[0];let l;if("pdf"!=r){if("snote"==r||"snotes"==r){const t=JSON.parse(yield this.readFilebAsText(o));return a.default()&&(t.file_path=o.path),n.destroy(),e(t)}return n.destroy(),alert("Désolé, ce type de document n'est pas encore supporté :-(")}l=yield(new i.default).load(o,n),n.text="Document prêt pour le rendu";const d={type:"snote",version:3,pages:[],author:"snote"};l.forEach(e=>{d.pages.push({image:e,objects:[],htmlContent:""})}),n.text="Document ready !",n.destroy(),e(d)}))).attr("type","file").click()})}readFilebAsText(e){const t=new FileReader;return new Promise(n=>{t.addEventListener("loadend",e=>{n(e.srcElement.result)}),t.readAsText(e)})}}},function(e,t,n){"use strict";var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{l(o.next(e))}catch(e){i(e)}}function a(e){try{l(o.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}l((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});t.default=class{load(e,t){const n=window.XPDF,r=URL.createObjectURL(e);return t.text="Ouverture du PDF",new Promise(i=>o(this,void 0,void 0,(function*(){if("pdf"!=e.name.split(".").reverse()[0])throw"Erreur lors du chargement : ce fichier n'est pas un PDF";const o=yield n.getDocument({url:r}),s=[];for(let e=0;e<o.numPages;e++){t.text=`Ouverture du PDF - page ${e+1} / ${o.numPages}`;const n=yield o.getPage(e+1),r=document.createElement("canvas"),i=r.getContext("2d"),a=n.getViewport(1.5);r.setAttribute("width",a.width),r.setAttribute("height",a.height),yield n.render({canvasContext:i,viewport:a}),s.push(r.width+"x"+r.height+"///"+r.toDataURL()),r.remove()}i(s)})))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(0);t.default=class{constructor(){this.loader=o.$("body").child("div").addClass("loader");const e=this.loader.child("div").addClass("gooey");e.child("span").addClass("dot");const t=e.child("div").addClass("dots");t.child("span"),t.child("span"),t.child("span"),this.message_container=this.loader.child("span").cssObj({position:"absolute",left:"50%",bottom:"25px",transform:"translateX(-50%)"})}set text(e){this.message_container.text(e)}destroy(){this.loader.remove()}}},function(e,t,n){var o=n(11);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(2)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,"body,html{margin:0;padding:0;height:100vh;width:100vw;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.rich-textarea{z-index:85;right:0;width:50vw;border-left:1px solid #d7d7d7}.rich-textarea,.workspace{position:absolute;top:0;bottom:0;height:100vh}.workspace{z-index:90;background:#fff;left:0;width:calc(50vw - 1px)}.workspace .flip{background:#fff;position:absolute;top:50%;right:0;transform:translate(50%,-50%);border:1px solid #d7d7d7;padding:2px;padding-top:5px;padding-bottom:5px;border-radius:4px;cursor:col-resize;opacity:0;transition:.75s}.workspace .flip i{vertical-align:middle}.workspace .flip:hover{opacity:1}.workspace .controls{user-select:none;background:#f2f2f2;padding:12px;height:30px;position:absolute;top:0;right:0;left:0;border-bottom:1px solid #d7d7d7}.workspace .controls .material-icons,.workspace .controls .simple-text{display:inline-block;height:30px;line-height:30px;vertical-align:middle;color:#565656;padding-left:7px;padding-right:7px;cursor:pointer;position:relative}.workspace .controls .material-icons span,.workspace .controls .simple-text span{display:inline-block;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.workspace .controls .simple-text{font-weight:800;font-size:18px;width:30px}.workspace .controls select{border:1px solid #c5c5c5;color:#3c3c3c}.workspace .slides{position:absolute;top:55px;left:0;right:0;bottom:55px;overflow:auto;padding:5px}.workspace .slides>img,.workspace .slides>svg{width:100%}.workspace .slides .welcome-wrapper{position:absolute;text-align:center;top:50%;left:50%;transform:translate(-50%,-50%);width:50%;color:#565656}.workspace .slides .welcome-wrapper img{display:block;position:relative;width:400px;max-width:80%;margin:auto;margin-bottom:35px}.workspace .slides_switcher{position:absolute;bottom:5px;left:50%;transform:translateX(-50%);background:rgba(0,0,0,.85);color:#fff;border-radius:4px;user-select:none}.workspace .slides_switcher span{vertical-align:middle;display:inline-block;line-height:30px;padding:8px}.workspace .slides_switcher span.current_page{font-size:18px}.workspace .slides_switcher span.next,.workspace .slides_switcher span.previous{cursor:pointer}.workspace .slides_switcher span.no-padding{padding-left:0;padding-right:0}.loader{position:fixed;top:0;right:0;bottom:0;left:0;background:#fff;z-index:98}.loader .gooey{position:absolute;top:50%;left:50%;width:142px;height:40px;margin:-20px 0 0 -71px;background:#fff;filter:contrast(20)}.loader .gooey .dot{position:absolute;width:16px;height:16px;top:12px;left:15px;filter:blur(4px);background:#000;border-radius:50%;transform:translateX(0);animation:dot 2.8s infinite}.loader .gooey .dots{transform:translateX(0);margin-top:12px;margin-left:31px;animation:dots 2.8s infinite}.loader .gooey .dots span{display:block;float:left;width:16px;height:16px;margin-left:16px;filter:blur(4px);background:#000;border-radius:50%}@-moz-keyframes dot{50%{transform:translateX(96px)}}@-webkit-keyframes dot{50%{transform:translateX(96px)}}@-o-keyframes dot{50%{transform:translateX(96px)}}@keyframes dot{50%{transform:translateX(96px)}}@-moz-keyframes dots{50%{transform:translateX(-31px)}}@-webkit-keyframes dots{50%{transform:translateX(-31px)}}@-o-keyframes dots{50%{transform:translateX(-31px)}}@keyframes dots{50%{transform:translateX(-31px)}}",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,o=n+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var r,i=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(i)?e:(r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(5),r=n(0),i=n(3),s=n(21),a=n(6);t.default=class{constructor(e){if(this.doc=e,e.pages.length<1)throw alert("Document non valide !"),"Erreur document";switch(e.version){case 3:r.$(".slides").html(""),r.$(".rich-textarea").remove(),e.pages.forEach(e=>{const t=e.image.split("///");e.richTextBox=new o.default(e.htmlContent);const[n,i]=t.splice(0,1)[0].split("x"),s=document.createElementNS("http://www.w3.org/2000/svg","svg"),l=s.appendChild(document.createElementNS("http://www.w3.org/2000/svg","image"));document.querySelector(".slides").appendChild(s),s.setAttribute("viewBox",`0 0 ${n} ${i}`),l.setAttributeNS("http://www.w3.org/1999/xlink","href",t.join("///")),l.setAttribute("x","0"),l.setAttribute("y","0"),l.setAttribute("width",n),l.setAttribute("height",i),e.imageBox=r.$(s),e.imageBox.click(e=>{const t=s.createSVGPoint();!function(e){t.x=e.clientX,t.y=e.clientY;const n=t.matrixTransform(s.getScreenCTM().inverse());console.log("("+n.x+", "+n.y+")")}(e)}),a.noteObjManager.loadFor(e.richTextBox.textarea)}),r.$(".slides_switcher").remove();let t=0;const n=r.$(".workspace").child("div").addClass("slides_switcher"),l=n.child("span").addClass("previous").addClass("material-icons").text("arrow_back"),d=n.child("span").addClass("current_page");d.child("span").text("Page ").addClass("no-padding");const c=d.child("span").text((t+1).toString()).addClass("no-padding");d.child("span").text("/").addClass("no-padding"),d.child("span").text(e.pages.length.toString()).addClass("no-padding"),c.input(()=>{t=parseInt(c.text())-1,u(!1)}),c.attr("contentEditable","true"),c.addClass("blur-allowed");const u=(n=!0)=>{n&&c.text(""+(t+1)),e.pages.forEach((e,n)=>{t==n?(e.richTextBox.show(),e.imageBox.css("display","block")):(e.richTextBox.hide(),e.imageBox.css("display","none"))})};u(),l.click(()=>{--t<0&&(t=0),u()}),new s.default(n),n.child("span").addClass("next").addClass("material-icons").text("arrow_forward").click(()=>{++t>e.pages.length-1&&(t=e.pages.length-1),u()}),r.$(".welcome-wrapper").css("display","none"),i.updateSize();break;default:alert("Cette version n'est pas (ou plus) prise en charge.")}}save(){return this.doc.pages.forEach(e=>{e.htmlContent=e.richTextBox.html}),this.doc}}},function(e,t,n){var o=n(15);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(2)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,".matrix{display:inline-block;background:#eee;vertical-align:middle;position:relative}.matrix table{display:inline-table;vertical-align:top}.matrix table td{background:#fff}.rich-textarea .controls{user-select:none;background:#f2f2f2;padding:12px;height:30px;position:absolute;top:0;right:0;left:0;border-bottom:1px solid #d7d7d7}.rich-textarea .controls .material-icons,.rich-textarea .controls .simple-text{display:inline-block;height:30px;line-height:30px;vertical-align:middle;color:#565656;padding-left:7px;padding-right:7px;cursor:pointer;position:relative}.rich-textarea .controls .material-icons span,.rich-textarea .controls .simple-text span{display:inline-block;position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.rich-textarea .controls .simple-text{font-weight:800;font-size:18px;width:30px}.rich-textarea .controls select{border:1px solid #c5c5c5;color:#3c3c3c}.rich-textarea .text{outline:none;position:absolute;top:55px;right:0;left:0;bottom:0;padding:25px;overflow:auto;background:#fff}",""])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const o=n(17),r=n(0),i=n(18);n(19);const s=n(6);class a extends o.default{constructor(){super(...arguments),this.items=i.items}build(){const e=r.$(this.e);let t;e.attr("contentEditable","false"),e.hasClass("new")?(e.html(""),t=e.child("span").attr("contentEditable","true").text(" ")):t=e.children("span.snotes-math-line"),t.addClass("snotes-math-line");t.keydown(e=>{}),t.input(e=>{if(" "==e.data){e.preventDefault(),document.execCommand("delete");const t=e.target.innerText,n=function(e){let t=e.childNodes,n=document.getSelection().getRangeAt(0),o=0;for(const e of t){if(e==n.startContainer||e.contains(n.startContainer))return o+n.startOffset;1==e.nodeType?o+=e.innerText.length:3==e.nodeType&&(o+=e.data.length)}}(e.target)-1;if("\\"!=t[n])return document.execCommand("insertText",null," ");let o="\\";for(let e=1;e<10;e++){const r=t[n-e];if(null==r||" "==r)return document.execCommand("insertText",null," ");if(o=r+o,"\\"==r)break}if("\\"!=o[0])return document.execCommand("insertText",null," ");for(let e=0;e<this.items.length;e++){const t=this.items[e];if(o==`\\${t.trigger}\\`){for(let e=0;e<o.length;e++)document.execCommand("delete");return t.code()}}}}),this.focus_element=t.get(0)}focus(){this.focus_element.focus()}}t.default=a,a.type="snote_math_object",a.className="snotes-math-object",s.noteObjManager.object=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class o{buildFrom(e){this.e=e,e.setAttribute("data-snote-object",""),this.build()}build(){throw"Not implemented"}}t.default=o,o.type="default_object",o.className=""},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.items=[{trigger:"integral",code:()=>document.execCommand("insertHTML",null,"&int;")},{trigger:"forall",code:()=>document.execCommand("insertHTML",null,"&#8704;")},{trigger:"complement",code:()=>document.execCommand("insertHTML",null,"&#8705;")},{trigger:"part_diff",code:()=>document.execCommand("insertHTML",null,"&#8706;")},{trigger:"exists",code:()=>document.execCommand("insertHTML",null,"&#8707;")},{trigger:"!exists",code:()=>document.execCommand("insertHTML",null,"&#8708;")},{trigger:"nabla",code:()=>document.execCommand("insertHTML",null,"&nabla;")},{trigger:"in",code:()=>document.execCommand("insertHTML",null,"&isin;")},{trigger:"not_in",code:()=>document.execCommand("insertHTML",null,"&notin;")},{trigger:"sum",code:()=>document.execCommand("insertHTML",null,"&sum;")},{trigger:"minplus",code:()=>document.execCommand("insertHTML",null,"&#8723;")},{trigger:"set_minus",code:()=>document.execCommand("insertHTML",null,"&#8726;")},{trigger:"sqrt",code:()=>document.execCommand("insertHTML",null,"&radic;")},{trigger:"infinity",code:()=>document.execCommand("insertHTML",null,"&infin;")},{trigger:"eps",code:()=>document.execCommand("insertHTML",null,"&#120576;")},{trigger:"not",code:()=>document.execCommand("insertHTML",null,"&not;")},{trigger:"omega",code:()=>document.execCommand("insertHTML",null,"&Omega;")}]},function(e,t,n){var o=n(20);"string"==typeof o&&(o=[[e.i,o,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(2)(o,r);o.locals&&(e.exports=o.locals)},function(e,t,n){(e.exports=n(1)(!1)).push([e.i,".snotes-math-object{background:#d7d7d7;padding:5px;vertical-align:middle}.snotes-math-object,.snotes-math-object span{display:inline-block}",""])},function(e,t,n){"use strict";this&&this.__awaiter;Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){navigator}}},function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.saveJSONAsFile=(o=document.createElement("a"),document.body.appendChild(o),o.style.display="none",function(e,t){var n=JSON.stringify(e),r=new Blob([n],{type:"octet/stream"}),i=window.URL.createObjectURL(r);o.href=i,o.download=t,o.click(),window.URL.revokeObjectURL(i)}),t.saveAudioFile=function(){var e=document.createElement("a");return document.body.appendChild(e),e.style.display="none",function(t,n){var o=t,r=window.URL.createObjectURL(o);e.href=r,e.download=n,e.click(),window.URL.revokeObjectURL(r)}}()},function(e,t){e.exports=require("fs")}]);